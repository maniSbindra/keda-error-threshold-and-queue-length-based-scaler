{
	"version": "Notebook/1.0",
	"items": [
	  {
		"type": 1,
		"content": {
		  "json": "## New workbook\n---\n\nWelcome to your new workbook.  This area will display text formatted as markdown.\n\n\nWe've included a basic analytics query to get you started. Use the `Edit` button below each section to configure it or add more sections."
		},
		"name": "text - 2"
	  },
	  {
		"type": 9,
		"content": {
		  "version": "KqlParameterItem/1.0",
		  "parameters": [
			{
			  "id": "c072a3bd-635a-4ff3-b2d7-806722d380f1",
			  "version": "KqlParameterItem/1.0",
			  "name": "timeRange",
			  "label": "Time Range",
			  "type": 4,
			  "typeSettings": {
				"selectableValues": [
				  {
					"durationMs": 300000
				  },
				  {
					"durationMs": 900000
				  },
				  {
					"durationMs": 1800000
				  },
				  {
					"durationMs": 3600000
				  },
				  {
					"durationMs": 14400000
				  },
				  {
					"durationMs": 43200000
				  },
				  {
					"durationMs": 86400000
				  },
				  {
					"durationMs": 172800000
				  },
				  {
					"durationMs": 259200000
				  }
				],
				"allowCustom": true
			  },
			  "timeContext": {
				"durationMs": 86400000
			  },
			  "value": {
				"durationMs": 900000
			  }
			}
		  ],
		  "style": "pills",
		  "queryType": 0,
		  "resourceType": "microsoft.operationalinsights/workspaces"
		},
		"name": "parameters - 2"
	  },
	  {
		"type": 3,
		"content": {
		  "version": "KqlItem/1.0",
		  "query": "AppMetrics\n| where TimeGenerated > {timeRange:start} and TimeGenerated < {timeRange:end}\n| where Name == \"subscriber-app.openai.embeddings.requests\"\n| extend StatusCode = tostring(Properties.status)\n| summarize count=sum(ItemCount) by bin(TimeGenerated, 10s),  StatusCode\n\n",
		  "showQuery": true,
		  "size": 0,
		  "aggregation": 3,
		  "showAnalytics": true,
		  "title": "OpenAI Embeddings Requests by Response Status",
		  "timeContext": {
			"durationMs": 86400000
		  },
		  "queryType": 0,
		  "resourceType": "microsoft.operationalinsights/workspaces",
		  "visualization": "timechart"
		},
		"name": "queryOpenAIEmbeddingsRequests"
	  },
	  {
		"type": 10,
		"content": {
		  "chartId": "ada31eca-ed3c-40b9-a50f-52077b618d83",
		  "version": "MetricsItem/2.0",
		  "size": 0,
		  "chartType": 2,
		  "resourceType": "microsoft.app/containerapps",
		  "metricScope": 0,
		  "resourceIds": [
			"/subscriptions/##SUBSCRIPTION_ID##/resourcegroups/##RESOURCE_GROUP##/providers/microsoft.app/containerapps/aoai-workload-app"
		  ],
		  "timeContextFromParameter": "timeRange",
		  "timeContext": {
			"durationMs": 0
		  },
		  "metrics": [
			{
			  "namespace": "microsoft.app/containerapps",
			  "metric": "microsoft.app/containerapps-Basic-Replicas",
			  "aggregation": 3,
			  "splitBy": null
			}
		  ],
		  "title": "Workload Replica Count",
		  "gridSettings": {
			"rowLimit": 10000
		  }
		},
		"name": "metric - 3"
	  },
	  {
		"type": 10,
		"content": {
		  "chartId": "e62c718b-e85e-4fcd-b619-899929bad089",
		  "version": "MetricsItem/2.0",
		  "size": 0,
		  "chartType": 2,
		  "resourceType": "microsoft.servicebus/namespaces",
		  "metricScope": 0,
		  "resourceIds": [
			"/subscriptions/##SUBSCRIPTION_ID##/resourcegroups/##RESOURCE_GROUP##/providers/microsoft.servicebus/namespaces/##SERVICE_BUS_NAMESPACE##"
		  ],
		  "timeContextFromParameter": "timeRange",
		  "timeContext": {
			"durationMs": 0
		  },
		  "metrics": [
			{
			  "namespace": "microsoft.servicebus/namespaces",
			  "metric": "microsoft.servicebus/namespaces--ActiveMessages",
			  "aggregation": 4,
			  "splitBy": [
				"EntityName"
			  ]
			}
		  ],
		  "title": "Topic Message Count",
		  "filters": [
			{
			  "key": "EntityName",
			  "operator": 0,
			  "values": [
				"workload"
			  ]
			}
		  ],
		  "gridSettings": {
			"rowLimit": 10000
		  }
		},
		"name": "metric - 4"
	  }
	],
	"fallbackResourceIds": [
	  "/subscriptions/##SUBSCRIPTION_ID##/resourcegroups/##RESOURCE_GROUP##/providers/microsoft.operationalinsights/workspaces/aoaiscaler-sl1"
	],
	"$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
  }